<?xml version="1.0" encoding="UTF-8"?>
<launch>

	<!-- Robot Model -->
    <param name="robot_description" command="$(find xacro)/xacro --inorder '$(find intermedio)/urdf/phantom_1.xacro'" />
	<param name="robot_2" command="$(find xacro)/xacro --inorder '$(find intermedio)/urdf/phantom_2.xacro'" />
	<arg name="x" default="0"/>
	<arg name="y" default="0.5"/>
	<arg name="y2" default="-0.5"/>
	<arg name="z" default="0"/>

	<!-- Gazebo Initialization -->
	<include file="$(find gazebo_ros)/launch/empty_world.launch">
	<arg name="use_sim_time" value="true"/>
	</include> 

	<!-- Spawn Robot Model -->
	<node name="mybot_spawn" 
		pkg="gazebo_ros" 
		type="spawn_model" 
		output="screen"
        args="-urdf -param robot_description 
			-model phantomXPincher1 -x $(arg x) -y $(arg y) -z $(arg z)" />

	<!-- Spawn Robot Model -->
	<node name="mybot_spawn_2" 
		pkg="gazebo_ros" 
		type="spawn_model" 
		output="screen"
        args="-urdf -param robot_2 
			-model phantomXPincher2 -x $(arg x) -y $(arg y2) -z $(arg z)" />

	<!-- Load controllers -->
    <rosparam command="load" file="$(find intermedio)/config/joint_controller_1.yaml" />
	<rosparam command="load" file="$(find intermedio)/config/joint_controller_2.yaml" />
        
	<!-- Controllers -->
	<node name="controller_spawner" pkg="controller_manager" type="spawner"
	    respawn="false" output="screen"
	    args="
	    joint_state_controller
	    joint11_position_controller
	    joint21_position_controller
	    joint31_position_controller
	    joint41_position_controller
	    joint51_position_controller
	    joint61_position_controller
		joint12_position_controller
	    joint22_position_controller
	    joint32_position_controller
	    joint42_position_controller
	    joint52_position_controller
	    joint62_position_controller
	    --timeout 60">
	</node>
		
	<!-- rqt -->
	<!-- <node name="rqt_reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure" /> -->
	<node name="rqt_publisher" pkg="rqt_publisher" type="rqt_publisher" />

</launch>